
# Quant BackTesting

## LowPBR_LowDebt
- Low PBR/PER 조건과 Low 부채 비율 조건을 동시에 만족하는 주식을 매수하는 알고리즘을 백테스트
- debt_ratio.py: OpenDartReader를 이용하여 부채 비율을 산출하는 예제
- valued_stock_PBR.py: Low PBR + Low Debt Ratio 매수 알고리즘에 대한 백테스트 (HyperParameters: start_year: 투자 시작 연도, end_year: 투자 종료 연도, PBR_upper_threshold: PBR 상한, PBR_lower_threshold: PBR 하한, debt_ratio_threshold: 부채 비율 상한, num_stock_limit: 최대 매수 종목 수, upper_yield_limit: 익절 수익률, lower_yield_limit: 손절 수익률, duration: 보유 기간(yr))
- valued_stock_PER.py: Low PER + Low Debt Ratio 매수 알고리즘에 대한 백테스트 (HyperParamters: 상기 동일)
- 실행 LOG 예시: 
```
* Low PBR with Low Debt 전략
* 기간:  20100104 ~ 20101230
* 종목:  ['017890', '013000', '003780', '002070', '067010', '006370', '023900', '081580', '058450', '011560', '007770', '079170', '023450', '079650', '079000', '093230', '006660', '054040', '098120', '005800', '049690', '054450', '036560', '056190', '049830', '076080', '003800', '015890', '025860', '024070']
* 종목명:  ['한국알콜', '세우글로벌', '진양산업', '비비안', '이씨에스', '대구백화점', '풍국주정', '성우전자', '일야', '세보엠이씨', '한일화학', '한창산업', '동남합성', '서산', '와토스코리아', '이아이디', '삼성공조', '한국컴퓨터', '마이크로컨텍솔', '신영와코루', '포휴먼', '텔레칩스', '영풍정밀', '에스에프에이', '승일', '웰크론한텍', '에이스침대', '태경산업', '남해화학', 'WISCOM']
* PER:  [5.06, 5.11, 5.17, 5.18, 5.26, 5.29, 5.31, 5.37, 5.44, 5.46, 5.52, 5.6, 5.9, 5.94, 5.98, 6.07, 6.07, 6.24, 6.29, 6.3, 6.3, 6.31, 6.34, 6.34, 6.36, 6.47, 6.47, 6.49, 6.51, 6.53]
* Debt Ratio:  [39.057574111399404, 16.76299503041871, 42.01064796201469, 22.565319965027903, 13.89880274214493, 27.15627818764933, 28.268736115232507, 36.11465044720345, 43.83902171717292, 32.26143603947008, 19.90699822581357, 11.665450060147961, 16.084848175101953, 19.35746258004764, 8.67703663692808, 22.974227768326326, 48.19274289952645, 35.677623727980944, 26.01883871577248, 13.392325392669418, 18.30956933604662, 18.81352228727723, 32.13680956318702, 37.972035263923615, 38.982491382622555, 16.8981045491108, 15.617057750356386, 46.70311477516956, 34.81614861000437, 22.10547615429413]
* 종목 수익률:  [0.9099221808510638, 1.1534787943262412, 1.0612830508474576, 1.3215664792092707, 0.9185006439742409, 1.1361071428571428, 0.9818327380952381, 0.7178133792048931, 0.5629690854326397, 0.9433272606382979, 0.9791881858902577, 0.8052093274111676, 1.1232413761635334, 0.9431465927099841, 0.9769402675822874, 0.6954970085470085, 1.2004769349845201, 1.9905499999999998, 1.9905499999999998, 1.1157632653061225, 0.7981558635394456, 0.6005134268437748, 1.2620826923076924, 1.9905500000000003, 1.1350444029850746, 0.4952749999999999, 1.2387170033670034, 0.9261842629482071, 0.9429221179624664, 1.101816573533147]
* 평균 수익률:  1.0673
* 동기간 코스피 수익률:  1.2196
```
- 결과 파일 예시:
```
Term	전략 수익률	동기간 코스피 수익률
2010년01월 (최대 보유 기간: 1년)	1.0673	1.2196
2011년01월 (최대 보유 기간: 1년)	0.913	0.8847
2012년01월 (최대 보유 기간: 1년)	1.2004	1.0903
2013년01월 (최대 보유 기간: 1년)	1.1871	0.9988
2014년01월 (최대 보유 기간: 1년)	1.1946	0.9516
2015년01월 (최대 보유 기간: 1년)	1.3427	1.0246
2016년01월 (최대 보유 기간: 1년)	1.1561	1.0368
2017년01월 (최대 보유 기간: 1년)	1.0535	1.2202
2018년01월 (최대 보유 기간: 1년)	0.8924	0.8247
2019년01월 (최대 보유 기간: 1년)	1.1881	1.0717
2020년01월 (최대 보유 기간: 1년)	1.107	1.3054
```

## LowPBR_SmallStock
- Low PBR/PER 조건과 소형주 조건을 만족하는 주식 매수 알고리즘을 백테스트
- LowPBR_SmallStock.py: Low PBR + 소형주 매수 알고리즘 백테스트
- LowPER_smallstock.py: Low PER + 소형주 매수 알고리즘 백테스트
- 실행 LOG 예시:
```
* Low PER 소형주 전략
* 기간:  20100104 ~ 20101230
* 종목:  ['013000', '003780', '067010', '017650', '014130', '010470', '079650', '068060', '098120', '038010', '104040', '010640', '054090', '088290', '019180', '066690', '089790', '091440', '025270', '080470', '025880', '070590', '009780', '094940', '002290', '051630', '011300', '036120']
* 종목명:  ['세우글로벌', '진양산업', '이씨에스', '대림제지', '한익스프레스', '오리콤', '서산', 'KCW', '마이크로컨텍솔', '제일테크노스', '대성파인텍', '진양폴리', '삼진엘앤디', '이원컴포텍', '티에이치엔', '보광티에스', '제이티', '텔레필드', '부산방직', '성창오토텍', '케이씨피드', '한솔인티큐브', '엠에스씨', '푸른기술', '삼일기업공사', '진양화학', '성안', 'SCI평가정보']
* PER:  [5.11, 5.17, 5.26, 5.36, 5.71, 5.91, 5.94, 6.07, 6.29, 7.16, 7.22, 7.35, 7.38, 7.85, 8.22, 8.24, 8.8, 8.95, 9.3, 9.31, 9.38, 9.67, 9.93, 9.97, 10.27, 10.6, 11.05, 11.4]
* 종목 수익률:  [1.1535, 1.0613, 0.9185, 1.1723, 1.9906, 1.3825, 0.9431, 1.9906, 1.9906, 1.9906, 1.2101, 1.3822, 1.5273, 1.0341, 1.9906, 0.4953, 0.4953, 0.9473, 1.9906, 1.4416, 1.9906, 1.0556, 1.9906, 0.8266, 1.2889, 1.4382, 1.9906, 1.4616]
* 평균 수익률:  1.3982
* 동기간 코스피 수익률:  1.2196
```

- 결과 파일 예시:
```
Term	전략 수익률	동기간 코스피 수익률
2010년01월 (최대 보유 기간: 1년)	1.3982	1.2196
2011년01월 (최대 보유 기간: 1년)	1.2786	0.8847
2012년01월 (최대 보유 기간: 1년)	1.5348	1.0903
2013년01월 (최대 보유 기간: 1년)	1.1243	0.9988
2014년01월 (최대 보유 기간: 1년)	1.1434	0.9516
2015년01월 (최대 보유 기간: 1년)	1.7475	1.0246
2016년01월 (최대 보유 기간: 1년)	1.6216	1.0368
2017년01월 (최대 보유 기간: 1년)	0.9935	1.2202
2018년01월 (최대 보유 기간: 1년)	1.3383	0.8247
2019년01월 (최대 보유 기간: 1년)	1.2641	1.0717
2020년01월 (최대 보유 기간: 1년)	1.2101	1.3054
2021년01월 (최대 보유 기간: 1년)	1.5948	1.149
```

## NCAV
- 유동자산, 부채총계, 당기순이익 Data의 선행 다운로드 필요
- 아래 조건을 만족하는 주식 매수 알고리즘을 백테스트
```
Conditions
1) 유동자산 - 부채총계 > 시가총액 * NCAV_multiple
2) 세후이익 > 0
```
- 실행 LOG 예시:
```
* NCAV 전략
* 기간:  20100104 ~ 20101230
* 종목:  ['006660', '006740', '032190', '013120', '002290', '067770', '032080', '038680', '011080', '057880']
* 종목명:  ['삼성공조', '영풍제지', '다우데이타', '동원개발', '삼일기업공사', '세진티에스', '아즈텍WB', '에스넷', '형지I&C', '피에이치씨']
* 종목 수익률:  [1.2005, 1.0059, 0.9422, 0.8411, 1.2889, 1.2759, 1.2309, 1.9906, 0.8121, 0.6216]
* 평균 수익률:  1.121
* 동기간 코스피 수익률:  1.2196
```
- 결과 파일 예시:
```
Term	전략 수익률	동기간 코스피 수익률
2010년01월 (최대 보유 기간: 1년)	1.121	1.2196
2011년01월 (최대 보유 기간: 1년)	0.9822	0.8847
2012년01월 (최대 보유 기간: 1년)	1.4139	1.0903
2013년01월 (최대 보유 기간: 1년)	1.2532	0.9988
2014년01월 (최대 보유 기간: 1년)	1.3078	0.9516
2015년01월 (최대 보유 기간: 1년)	1.6161	1.0246
2016년01월 (최대 보유 기간: 1년)	1.251	1.0368
2017년01월 (최대 보유 기간: 1년)	1.116	1.2202
2018년01월 (최대 보유 기간: 1년)	0.8094	0.8247
2019년01월 (최대 보유 기간: 1년)	1.0908	1.0717
2020년01월 (최대 보유 기간: 1년)	0.8958	1.3054
```

## PBR_PCR_Combo
- PCR Data의 선행 다운로드 필요
- PCR.py: PCR + 소형주 매수 전략 BackTesting
- PER_PCR_Combo.py: PER + PCR + 소형주 매수 전략 BackTesting
- 실행 Log 예시:
```
* PER + PCR Combo 소형주 전략
* 기간:  20100104 ~ 20101230
* 종목:  ['082660', '058220', '079650', '013000', '039240', '098120', '067010', '014910', '070590', '036120', '036480']
* 종목명:  ['코스나인', '아리온', '서산', '세우글로벌', '경남스틸', '마이크로컨텍솔', '이씨에스', '성문전자', '한솔인티큐브', 'SCI평가정보', '대성미생물']
* 종목 수익률:  [0.6705, 1.0826, 0.9431, 1.1535, 1.0552, 1.9906, 0.9185, 1.9906, 1.0556, 1.4616, 1.0625]
* 평균 수익률:  1.2168
* 동기간 코스피 수익률:  1.2196
```
- 결과 파일 예시:
```
Term	전략 수익률	동기간 코스피 수익률
2010년01월 (최대 보유 기간: 1년)	1.2168	1.2196
2011년01월 (최대 보유 기간: 1년)	1.1524	0.8847
2012년01월 (최대 보유 기간: 1년)	1.3362	1.0903
2013년01월 (최대 보유 기간: 1년)	1.2128	0.9988
2014년01월 (최대 보유 기간: 1년)	1.1682	0.9516
2015년01월 (최대 보유 기간: 1년)	1.7749	1.0246
2016년01월 (최대 보유 기간: 1년)	1.5327	1.0368
2017년01월 (최대 보유 기간: 1년)	0.9512	1.2202
2018년01월 (최대 보유 기간: 1년)	1.1618	0.8247
2019년01월 (최대 보유 기간: 1년)	1.2244	1.0717
2020년01월 (최대 보유 기간: 1년)	1.083	1.3054
2021년01월 (최대 보유 기간: 1년)	1.6677	1.1487
```

## Reports
- 증권사 목표 주가 상향 종목 매수 알고리즘 BackTesting
- naver_Reports.py: 네이버금융 홈페이지로부터 증권사별 기업 분석 보고서를 크롤링하여 엑셀 파일로 저장
![image](https://user-images.githubusercontent.com/55021961/138707797-b65ee1ac-64bc-42ba-b9c4-1a4516b47260.png)
- report_backTesting.py: 위의 엑셀 파일 기반으로 '목표 주가 상향 종목 매수 알고리즘' BackTesting
- 결과 파일 예시:
```
code	yields
000660	0.772130983
035250	1.003184135
032500	1.186352149
004800	1.044343566
000880	0.917962221
002380	1
005380	0.814781409
009150	0.716929462
083650	1
```

## SuperTrend
- 암호화폐 기술적 분석에 종종 사용되는 'SuperTrend' 지표 기반의 매매 알고리즘 BackTesting
- SuperTrend_BackTesting.py: SuperTrend 지표 기반의 매매 알고리즘 BackTesting
- SuperTrend_with_StopLoss.py: SuperTrend + 손절매 알고리즘 BackTesting



